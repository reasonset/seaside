# ã‚³ãƒãƒ³ãƒ‰

## å†…éƒ¨ã‚³ãƒãƒ³ãƒ‰

```
command arg1 arg2...
```

commandã¯shellwordsã¨ã—ã¦è§£é‡ˆã•ã‚Œã€Seasideã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚

## å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰

```
! command arg1 arg2
```

1st positionã®å€¤ãŒ `!` ã§ã‚ã‚‹å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

ã“ã‚Œã¯å†…éƒ¨çš„ã«ã¯Rubyã®`fork`ã¨`exec`ã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
(ã¤ã¾ã‚Šã€Windowsã§ã¯å‹•ã‹ãªã„ã ã‚ã†)

## Rubyã‚³ãƒãƒ³ãƒ‰

```
*[ command arg1 arg2 ]*
```

1st positionã®å€¤ãŒ `!` ã§ã‚ã‚‹å ´åˆã€`*[ ... ]*`ã§å›²ã¾ã‚ŒãŸç¯„å›²ãŒRubyã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
ã“ã‚Œã¯Rubyã®evalã«ã‚ˆã£ã¦è©•ä¾¡ã•ã‚Œã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚

ãªãŠã€ã“ã®è§£é‡ˆã¯

```re
^\*\[\s(.*?)\s\*\](?:$|\s)
```

ã§ã‚ã‚‹ã®ã§å ´åˆã«ã‚ˆã£ã¦ã¯æ³¨æ„ãŒå¿…è¦ã§ã‚ã‚‹ã€‚

# å¤‰æ•°

## å¤‰æ•°ã®å‹

Seasideã®å¤‰æ•°ã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ãªå‹ã¨ã—ã¦

* ã‚¹ã‚«ãƒ©ãƒ¼
* null
* é…åˆ—
* é€£æƒ³é…åˆ—

ã®ã„ãšã‚Œã‹ã«ãªã‚Šã€ã“ã‚Œä»¥å¤–ã®å‹ã«ã¯ãªã‚Šå¾—ãªã„ã€‚

ãŸã ã—ã€å†…éƒ¨çš„ã«ã¯Seasideã®å¤‰æ•°ã¯Rubyã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã€‚
Seasideå†…ã¶éSeasideãƒã‚¤ãƒ†ã‚£ãƒ–ãªå‹ãŒå±•é–‹ã•ã‚ŒãŸå ´åˆã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯`to_s`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚Œã€æ–‡å­—åˆ—åŒ–ã•ã‚Œã‚‹ã€‚

Seasideãƒªãƒ†ãƒ©ãƒ«ã®å‹ã¨ã—ã¦intãŒã‚ã‚‹ãŒã€å¤‰æ•°å‹ã¨ã—ã¦ã¯ã‚¹ã‚«ãƒ©ãƒ¼ã«ãªã‚Šã€ã“ã‚ŒãŒæ•°å€¤ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ã‹ã©ã†ã‹ã¯(ã‚·ã‚§ãƒ«ã®ã‚ˆã†ã«)ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚‹ã€‚

## ãƒªãƒ†ãƒ©ãƒ«ä»£å…¥

`name(type) = value` ã®å½¢å¼ã§å¤‰æ•°`name`ã«ãƒªãƒ†ãƒ©ãƒ«å€¤ã‚’ä»£å…¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

`type`ã¯ãƒªãƒ†ãƒ©ãƒ«ã®è§£é‡ˆã®ä»•æ–¹ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ã‚ã‚Šã€å¤‰æ•°è‡ªä½“ã¯å‹•çš„ã§ã‚ã‚‹ã€‚

```
name(str) = Haruka
```

## å¼ä»£å…¥

```
command -> name
```

ã‚³ãƒãƒ³ãƒ‰åˆ—å¾Œæ–¹ã« `-> name` ã¨ã™ã‚‹ã“ã¨ã§å¤‰æ•°`name`ã«ã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’ä»£å…¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

ã‚³ãƒãƒ³ãƒ‰ãŒå†…éƒ¨ã‚³ãƒãƒ³ãƒ‰ã€Rubyå±•é–‹ã®å ´åˆã¯æˆ»ã‚Šå€¤ã€å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯æ¨™æº–å‡ºåŠ›ã®å†…å®¹ãŒä»£å…¥ã•ã‚Œã‚‹ã€‚

## Rubyã‹ã‚‰ã®å¤‰æ•°å‚ç…§

åŸ‹ã‚è¾¼ã¾ã‚ŒãŸRubyã‹ã‚‰ã¯å¤‰æ•°ã¯`$_ssparam[name]`ã®å½¢ã§å‚ç…§ã§ãã‚‹ã€‚

# ãƒ‘ã‚¤ãƒ—

```
command1 | command2
```

ä»»æ„ã®å€‹æ•°ã®ã‚³ãƒãƒ³ãƒ‰åˆ—ã‚’ãƒ‘ã‚¤ãƒ— (`|`) ã§ã¤ãªãã“ã¨ãŒã§ãã‚‹ã€‚

ã“ã®å ´åˆã€command1ãŒå†…éƒ¨ã‚³ãƒãƒ³ãƒ‰ã€ã¾ãŸã¯Rubyã‚³ãƒãƒ³ãƒ‰ãªã‚‰ã°ãã®æˆ»ã‚Šå€¤ãŒæ¸¡ã•ã‚Œã‚‹ã€‚
command2ãŒå¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ãªã‚‰ã°ã€æ¨™æº–å‡ºåŠ›ã«æ›¸ã‹ã‚ŒãŸå†…å®¹ãŒæ¸¡ã•ã‚Œã‚‹ã€‚

å—ã‘å–ã‚Šæ–¹ã¯ã€command2ãŒå†…éƒ¨ã‚³ãƒãƒ³ãƒ‰ãªã‚‰ã°ã€ã‚³ãƒãƒ³ãƒ‰ã«å¼•æ•°ãŒãªã„å ´åˆã¯å¼•æ•°ã¨ã—ã¦ä½¿ã‚ã‚Œã€å¼•æ•°ãŒã‚ã‚‹å ´åˆã¯`${sspipe}`ã¨ã—ã¦å‚ç…§ã§ãã‚‹ã€‚

command2ãŒRubyã‚³ãƒãƒ³ãƒ‰ãªã‚‰ã°ã€å¤‰æ•°`$_sspipe`ã¨ã—ã¦å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

command2ãŒå¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯æ¨™æº–å…¥åŠ›ã‹ã‚‰æ¸¡ã•ã‚Œã‚‹ã€‚

å…¨ã¦ã®ã‚³ãƒãƒ³ãƒ‰åˆ—ãŒå¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹å ´åˆã®ã¿ã€ã“ã‚Œã‚‰ã¯(ã‚·ã‚§ãƒ«ã®ã‚ˆã†ã«)PIPEã§ã¤ãªãŒã‚ŒãŸä¸¦åˆ—å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰åˆ—ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
ãã†ã§ãªã‘ã‚Œã°ã€å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã¯ã¾ãšå…¨ã¦ã®å€¤ã‚’æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿è¾¼ã¿ã€ãã—ã¦å…¨ã¦ã®å€¤ã‚’æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

# åŸ‹ã‚è¾¼ã¿Ruby

`{Ruby}>>>`ã¨ã„ã†è¡Œã‹ã‚‰`<<<{Ruby`ã¨ã„ã†è¡Œã¾ã§ã¯ã¾ã‚‹ã”ã¨Rubyã«æ¸¡ã•ã‚Œevalã•ã‚Œã‚‹ã€‚

```
{Ruby}>>>
<<<{Ruby}
```

`{Ruby}`ã«ä»£ãˆã¦`ğŸ’`ã‚’ä½¿ã£ã¦ã‚‚ã„ã„ã€‚

```
ğŸ’>>>
<<<ğŸ’
```

åŸ‹ã‚è¾¼ã¿Rubyã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯Seasideã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œä¸­æ°¸ç¶šçš„ã§ã‚ã‚‹ã€‚

ã“ã“ã‹ã‚‰Seasideã«å¤‰æ•°ã‚’æ¸¡ã—ãŸã„å ´åˆã¯æ¬¡ã®ã‚ˆã†ã«ã™ã‚Œã°è‰¯ã„ã€‚

```
*[ var1 ]* -> seaside_var
```

ã¾ãŸã¯æ¬¡ã®ã‚ˆã†ã«ã‚‚ã§ãã‚‹ã€‚

```
$_ssparam["seaside_var"] = val
```

# ã‚³ãƒ¡ãƒ³ãƒˆ

`#`ã‹ã‚‰è¡Œæœ«ã¾ã§ã¯ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦ç„¡è¦–ã•ã‚Œã‚‹ã€‚

# Seasideãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¾‹

```
name = ruka

date today -> date

! echo ${name} | tr a-z A-Z -> name
*[ "Ha" + $ssparam["name"] ]* -> name

print This is ${name}, hello, world in ${date}.  # This is HaRUKA, hello, world in 2020-09-18.
```
